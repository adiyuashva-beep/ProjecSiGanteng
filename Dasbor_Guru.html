<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin & BK - SiGanteng</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    
    <style>
        /* 1. RESET & LAYOUT */
        body { margin: 0; font-family: 'Outfit', sans-serif; background-color: #f1f5f9; display: flex; height: 100vh; overflow: hidden; color: #1e293b; }
        
        /* 2. SIDEBAR */
        .sidebar { width: 260px; background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%); color: white; display: flex; flex-direction: column; padding: 25px; flex-shrink: 0; }
        .logo { font-size: 24px; font-weight: 800; color: #38bdf8; margin-bottom: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; text-align: center; letter-spacing: 1px; }
        .menu-item { text-decoration: none; color: #94a3b8; padding: 15px; margin-bottom: 8px; border-radius: 12px; transition: 0.3s; display: flex; align-items: center; gap: 10px; font-size: 14px; font-weight: 600; cursor: pointer; }
        .menu-item:hover, .menu-item.aktif { background-color: rgba(255,255,255,0.1); color: white; }
        .menu-logout { margin-top: auto; color: #ef4444; background: rgba(239, 68, 68, 0.1); }

        /* 3. KONTEN UTAMA */
        .konten-utama { flex: 1; padding: 30px; overflow-y: auto; display: flex; flex-direction: column; }
        .header-atas { background: white; padding: 20px 30px; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }
        
        /* DASHBOARD GRID */
        #view-harian { display: block; }
        .grid-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .card-stat { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); border-bottom: 4px solid #e2e8f0; }
        .stat-hijau { border-color: #10b981; } .stat-merah { border-color: #ef4444; } .stat-kuning { border-color: #f59e0b; }
        .angka { font-size: 32px; font-weight: 800; color: #0f172a; margin: 5px 0 0; }
        
        /* SECTION MBG (LOGISTIK) */
        .mbg-section { background: white; padding: 25px; border-radius: 20px; margin-bottom: 30px; border: 1px solid #e2e8f0; }
        .mbg-title { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #f1f5f9; padding-bottom: 15px; }
        .grid-mbg { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .btn-mbg { padding: 20px; border-radius: 15px; border: none; color: white; cursor: pointer; text-align: left; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .btn-mbg:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        .mbg-x { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .mbg-xi { background: linear-gradient(135deg, #10b981, #059669); }
        .mbg-xii { background: linear-gradient(135deg, #f59e0b, #d97706); }

        /* GRID KELAS */
        .grid-kelas { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .card-kelas { background: white; padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; border: 1px solid #f1f5f9; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        .card-kelas:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); border-color: #3b82f6; }

        /* REKAP BULANAN & PREVIEW MBG */
        #view-rekap, #view-preview-mbg { display: none; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); flex: 1; overflow: hidden; flex-direction: column; }
        
        .filter-bar { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; background: #f8fafc; padding: 15px; border-radius: 15px; border: 1px solid #e2e8f0; align-items: center; }
        select { padding: 10px 15px; border-radius: 10px; border: 1px solid #cbd5e1; font-family: inherit; font-weight: 600; color: #334155; cursor: pointer; }
        .btn-cari { background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 700; cursor: pointer; }
        .btn-download { background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 700; cursor: pointer; margin-left: auto; display: flex; align-items: center; gap: 8px; }

        /* TABEL SCROLLABLE */
        .table-wrapper { flex: 1; overflow: auto; border: 1px solid #e2e8f0; border-radius: 10px; position: relative; }
        table { border-collapse: collapse; width: 100%; font-size: 13px; }
        th, td { padding: 10px; text-align: center; border: 1px solid #e2e8f0; white-space: nowrap; }
        th { background: #f1f5f9; color: #475569; font-weight: 800; position: sticky; top: 0; z-index: 10; }
        
        /* Sticky Kolom Nama */
        .sticky-col { position: sticky; left: 0; background: white; z-index: 5; border-right: 2px solid #e2e8f0; min-width: 150px; text-align: left; padding-left: 15px; }
        th.sticky-col { background: #f1f5f9; z-index: 11; }

        /* MODAL DETAIL */
        .modal-detail { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; z-index: 999; }
        .box-detail { background:white; padding:30px; border-radius:20px; width:90%; max-width:800px; max-height:80vh; overflow-y:auto; }

        /* Warna Status */
        .bg-hijau { background: #dcfce7; color: #166534; font-weight: bold; }
        .bg-merah { background: #fee2e2; color: #991b1b; font-weight: bold; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">üöÄ SiGanteng</div>
        <div class="menu-item aktif" id="menu-harian" onclick="gantiMenu('harian')">
            <i class='bx bxs-dashboard'></i> Dashboard & MBG
        </div>
        <div class="menu-item" id="menu-rekap" onclick="gantiMenu('rekap')">
            <i class='bx bxs-calendar'></i> Rekap Bulanan
        </div>
        <div class="menu-item menu-logout" onclick="logout()">
            <i class='bx bx-log-out'></i> Keluar
        </div>
    </div>

    <div class="konten-utama">
        <div class="header-atas">
            <div>
                <h2 style="margin:0; font-weight:800;" id="judul-halaman">Dashboard Harian</h2>
                <p style="margin:5px 0 0; color:#64748b; font-size:14px;" id="sub-judul">Pantauan Realtime & Logistik MBG</p>
            </div>
            <div style="font-weight:700; color:#0f172a;" id="jam-real">00:00:00</div>
        </div>

        <div id="view-harian">
            <div class="grid-stats">
                <div class="card-stat stat-hijau">
                    <span style="font-size:12px; color:#64748b; font-weight:700;">TOTAL HADIR</span>
                    <p class="angka" id="stat-hadir">0</p>
                </div>
                <div class="card-stat stat-kuning">
                    <span style="font-size:12px; color:#64748b; font-weight:700;">IZIN / SAKIT</span>
                    <p class="angka" id="stat-izin">0</p>
                </div>
                <div class="card-stat stat-merah">
                    <span style="font-size:12px; color:#64748b; font-weight:700;">BELUM ABSEN</span>
                    <p class="angka" id="stat-alpha">0</p>
                </div>
                <div class="card-stat">
                    <span style="font-size:12px; color:#64748b; font-weight:700;">TOTAL SISWA</span>
                    <p class="angka" id="stat-total">0</p>
                </div>
            </div>

            <div class="mbg-section">
                <div class="mbg-title">
                    <h3 style="margin:0; color:#334155;"><i class='bx bxs-bowl-hot'></i> Laporan Harian Per Angkatan (MBG)</h3>
                    <span style="font-size:12px; color:#ef4444; font-weight:600;">*Kelas GOPLE otomatis diabaikan</span>
                </div>
                <div class="grid-mbg">
                    <button class="btn-mbg mbg-x" onclick="previewAngkatan('X')">
                        <div>
                            <h2 style="margin:0;">KELAS X</h2>
                            <small>Cetak Laporan Logistik</small>
                        </div>
                        <i class='bx bxs-printer' style="font-size:30px; opacity:0.5;"></i>
                    </button>
                    <button class="btn-mbg mbg-xi" onclick="previewAngkatan('XI')">
                        <div>
                            <h2 style="margin:0;">KELAS XI</h2>
                            <small>Cetak Laporan Logistik</small>
                        </div>
                        <i class='bx bxs-printer' style="font-size:30px; opacity:0.5;"></i>
                    </button>
                    <button class="btn-mbg mbg-xii" onclick="previewAngkatan('XII')">
                        <div>
                            <h2 style="margin:0;">KELAS XII</h2>
                            <small>Cetak Laporan Logistik</small>
                        </div>
                        <i class='bx bxs-printer' style="font-size:30px; opacity:0.5;"></i>
                    </button>
                </div>
            </div>

            <h3 style="color:#475569; margin-bottom:15px;">üìÇ Detail Per Kelas:</h3>
            <div class="grid-kelas" id="grid-kelas-container">
                <p>Memuat data kelas...</p>
            </div>
        </div>

        <div id="view-rekap">
            <div class="filter-bar">
                <select id="pilih-bulan"></select>
                <select id="pilih-tahun"></select>
                <select id="pilih-kelas-rekap"><option value="">-- Pilih Kelas --</option></select>
                <button class="btn-cari" onclick="loadRekapBulanan()">üîç Tampilkan</button>
                <button class="btn-download" onclick="downloadTable('tabel-rekap', 'REKAP_BULANAN')">
                    <i class='bx bxs-file-export'></i> Download Excel
                </button>
            </div>
            <div class="table-wrapper">
                <table id="tabel-rekap">
                    <thead><tr id="header-row"></tr></thead>
                    <tbody id="body-rekap"><tr><td colspan="35" style="padding:30px;">Pilih filter lalu klik Tampilkan.</td></tr></tbody>
                </table>
            </div>
        </div>

        <div id="view-preview-mbg">
            <div class="filter-bar">
                <h3 style="margin:0; flex:1;" id="judul-preview">Laporan Logistik Kelas X</h3>
                <button class="btn-cari" onclick="kembaliKeDash()" style="background:#64748b;">Kembali</button>
                <button class="btn-download" onclick="downloadTable('tabel-mbg', 'LAPORAN_MBG')">
                    <i class='bx bxs-printer'></i> Print / Download
                </button>
            </div>
            <div class="table-wrapper">
                <table id="tabel-mbg" style="min-width: 100%;">
                    <thead>
                        <tr style="background:#f1f5f9;">
                            <th>No</th>
                            <th style="text-align:left;">Nama Kelas</th>
                            <th>Total Siswa</th>
                            <th class="bg-hijau">Hadir (Jatah Makan)</th>
                            <th class="bg-merah">Tidak Hadir (Sisa)</th>
                        </tr>
                    </thead>
                    <tbody id="body-mbg"></tbody>
                </table>
            </div>
        </div>

        <div class="modal-detail" id="modal-detail">
            <div class="box-detail">
                <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                    <h2 style="margin:0;" id="judul-modal">Detail Kelas</h2>
                    <button onclick="tutupModal()" style="background:#ef4444; color:white; border:none; padding:5px 15px; border-radius:5px; cursor:pointer;">Tutup</button>
                </div>
                <table style="min-width:100%;">
                    <thead>
                        <tr style="background:#f1f5f9;">
                            <th>No</th><th>Nama Siswa</th><th>Status</th><th>Jam Masuk</th><th>Keterangan</th>
                        </tr>
                    </thead>
                    <tbody id="body-detail-harian"></tbody>
                </table>
            </div>
        </div>

    </div>

    <script src="./assets/js/data_sekolah.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="./assets/js/firebase_config.js"></script>

    <script>
        // === 1. INISIALISASI ===
        const today = new Date();
        let listKelas = [];
        let kelompokKelas = {};
        let dataGlobalHarian = {}; // Simpan data realtime disini biar bisa dibaca fitur lain

        // Setup Jam
        setInterval(() => { document.getElementById('jam-real').innerText = new Date().toLocaleTimeString('id-ID'); }, 1000);

        // Setup Dropdown Bulan
        const bulanNames = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
        const selBulan = document.getElementById('pilih-bulan');
        bulanNames.forEach((b, i) => {
            let opt = new Option(b, i);
            if(i === today.getMonth()) opt.selected = true;
            selBulan.add(opt);
        });
        // Setup Tahun
        const selTahun = document.getElementById('pilih-tahun');
        const thnSkrg = today.getFullYear();
        selTahun.add(new Option(thnSkrg, thnSkrg));
        selTahun.add(new Option(thnSkrg-1, thnSkrg-1));

        // Load Data Sekolah
        if(typeof dataSiswa !== 'undefined'){
            dataSiswa.forEach(s => {
                if(!kelompokKelas[s.kelas]) kelompokKelas[s.kelas] = [];
                kelompokKelas[s.kelas].push(s);
            });
            listKelas = Object.keys(kelompokKelas).sort();
            
            // Isi Dropdown Rekap
            const selKelasRekap = document.getElementById('pilih-kelas-rekap');
            listKelas.forEach(k => { selKelasRekap.add(new Option(k, k)); });
        } else { alert("File data_sekolah.js tidak ditemukan!"); }


        // === 2. NAVIGASI ===
        function gantiMenu(menu) {
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('aktif'));
            document.getElementById('view-harian').style.display = 'none';
            document.getElementById('view-rekap').style.display = 'none';
            document.getElementById('view-preview-mbg').style.display = 'none';

            if(menu === 'harian') {
                document.getElementById('menu-harian').classList.add('aktif');
                document.getElementById('view-harian').style.display = 'block';
                document.getElementById('judul-halaman').innerText = "Dashboard Harian";
            } else {
                document.getElementById('menu-rekap').classList.add('aktif');
                document.getElementById('view-rekap').style.display = 'flex';
                document.getElementById('judul-halaman').innerText = "Rekapitulasi Bulanan";
            }
        }
        function kembaliKeDash() { gantiMenu('harian'); }


       // === 3. DASHBOARD HARIAN REALTIME ===
        function loadDataHarian() {
            // FIX: Gunakan Waktu Lokal (WIB), bukan UTC
            const d = new Date();
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            const tglStr = `${year}-${month}-${day}`; // Hasil: "2025-12-11"

            console.log("Menarik data tanggal:", tglStr); // Cek di console biar yakin

            database.ref(`absensi/${tglStr}`).on('value', snap => {
                dataGlobalHarian = snap.val() || {}; 
                
                let totHadir = 0, totIzin = 0;
                Object.values(dataGlobalHarian).forEach(d => {
                    if(d.status === 'Hadir') totHadir++;
                    if(d.status === 'Izin') totIzin++;
                });

                document.getElementById('stat-hadir').innerText = totHadir;
                document.getElementById('stat-izin').innerText = totIzin;
                document.getElementById('stat-total').innerText = dataSiswa.length;
                document.getElementById('stat-alpha').innerText = dataSiswa.length - (totHadir + totIzin);

                // Update Grid Kelas
                const container = document.getElementById('grid-kelas-container');
                container.innerHTML = '';
                listKelas.forEach(kls => {
                    let hadirKls = 0;
                    kelompokKelas[kls].forEach(s => { if(dataGlobalHarian[s.username]) hadirKls++; });
                    
                    let totKls = kelompokKelas[kls].length;
                    let pct = (hadirKls/totKls)*100;
                    let color = pct == 100 ? '#10b981' : (pct > 50 ? '#3b82f6' : '#f59e0b');

                    container.innerHTML += `
                        <div class="card-kelas" onclick="bukaModalHarian('${kls}')">
                            <h3 style="margin:0; font-size:18px;">${kls}</h3>
                            <p style="margin:5px 0; font-size:12px; color:#64748b;">${totKls} Siswa</p>
                            <div style="margin-top:10px; font-weight:bold; color:#10b981;">${hadirKls} Data Masuk</div>
                        </div>`;
                });
            });
        }


        // === 4. FITUR BARU: PREVIEW ANGKATAN (MBG) ===
        function previewAngkatan(tingkat) {
            // Tampilkan View Preview
            document.getElementById('view-harian').style.display = 'none';
            document.getElementById('view-preview-mbg').style.display = 'flex';
            document.getElementById('judul-preview').innerText = `Laporan Logistik Harian - Tingkat ${tingkat}`;

            const tbody = document.getElementById('body-mbg');
            tbody.innerHTML = '';

            // Filter Kelas (X, XI, XII) dan ABAIKAN GOPLE
            const kelasTarget = listKelas.filter(k => {
                const namaK = k.toUpperCase();
                if(namaK.includes("GOPLE")) return false; // Buang Gople
                
                // Cek Tingkat
                if(tingkat === 'X') return namaK.startsWith('X ') || namaK.startsWith('X-') || namaK.startsWith('10');
                if(tingkat === 'XI') return namaK.startsWith('XI ') || namaK.startsWith('XI-') || namaK.startsWith('11');
                if(tingkat === 'XII') return namaK.startsWith('XII ') || namaK.startsWith('XII-') || namaK.startsWith('12');
                return false;
            });

            let no = 1;
            let grandTotal = 0, grandHadir = 0, grandSisa = 0;

            kelasTarget.forEach(kls => {
                let totalSiswa = kelompokKelas[kls].length;
                let hadir = 0;
                
                // Hitung Hadir Realtime dari dataGlobalHarian
                kelompokKelas[kls].forEach(s => {
                    const absen = dataGlobalHarian[s.username];
                    if(absen && absen.status === 'Hadir') hadir++;
                });

                let sisa = totalSiswa - hadir;
                grandTotal += totalSiswa;
                grandHadir += hadir;
                grandSisa += sisa;

                tbody.innerHTML += `
                    <tr>
                        <td>${no++}</td>
                        <td style="text-align:left; font-weight:600;">${kls}</td>
                        <td>${totalSiswa}</td>
                        <td class="bg-hijau">${hadir}</td>
                        <td class="bg-merah">${sisa}</td>
                    </tr>`;
            });

            // Baris Total
            tbody.innerHTML += `
                <tr style="background:#e2e8f0; font-weight:800;">
                    <td colspan="2">TOTAL KESELURUHAN</td>
                    <td>${grandTotal}</td>
                    <td style="color:#166534;">${grandHadir} JATAH</td>
                    <td style="color:#991b1b;">${grandSisa} SISA</td>
                </tr>`;
        }


        // === 5. REKAP BULANAN ===
        async function loadRekapBulanan() {
            const bln = parseInt(document.getElementById('pilih-bulan').value);
            const thn = document.getElementById('pilih-tahun').value;
            const kls = document.getElementById('pilih-kelas-rekap').value;

            if(!kls) { alert("Pilih kelas dulu!"); return; }

            const tbody = document.getElementById('body-rekap');
            const thead = document.getElementById('header-row');
            tbody.innerHTML = '<tr><td colspan="35">‚è≥ Sedang menarik data...</td></tr>';

            // Header
            const jmlHari = new Date(thn, bln + 1, 0).getDate();
            let htmlHead = `<th class="sticky-col">No</th><th class="sticky-col">Nama Siswa</th>`;
            for(let d=1; d<=jmlHari; d++) htmlHead += `<th>${d}</th>`;
            htmlHead += `<th class="bg-hijau">H</th><th style="background:#fef3c7">I</th><th class="bg-merah">A</th>`;
            thead.innerHTML = htmlHead;

            // Tarik Data
            const blnStr = (bln+1).toString().padStart(2, '0');
            const startKey = `${thn}-${blnStr}-01`;
            const endKey = `${thn}-${blnStr}-31`;
            
            const snap = await database.ref('absensi').orderByKey().startAt(startKey).endAt(endKey).once('value');
            const rawData = snap.val() || {};

            // Render
            let htmlBody = '';
            kelompokKelas[kls].sort((a,b) => a.nama.localeCompare(b.nama)).forEach((s, i) => {
                let row = `<td>${i+1}</td><td class="sticky-col" style="font-weight:600;">${s.nama}</td>`;
                let h=0, iz=0, a=0;

                for(let d=1; d<=jmlHari; d++) {
                    const tglCek = `${thn}-${blnStr}-${d.toString().padStart(2, '0')}`;
                    const dataHari = rawData[tglCek] || {};
                    let cell = '-', cls = '';

                    const dayNum = new Date(tglCek).getDay();
                    if(dataHari[s.username]) {
                        if(dataHari[s.username].status === 'Hadir') { cell='H'; cls='sel-hadir'; h++; }
                        else { cell='I'; cls='sel-izin'; iz++; }
                    } else {
                        if(dayNum===0||dayNum===6) { cell=''; cls='sel-libur'; }
                        else if(new Date(tglCek) <= today) { cell='A'; cls='sel-alpha'; a++; }
                    }
                    
                    // Style khusus sel
                    let style = "";
                    if(cls==='sel-hadir') style="background:#dcfce7; color:green; font-weight:bold;";
                    if(cls==='sel-izin') style="background:#fef3c7; color:#b45309; font-weight:bold;";
                    if(cls==='sel-alpha') style="background:#fee2e2; color:red;";
                    
                    row += `<td style="${style}">${cell}</td>`;
                }
                row += `<td style="font-weight:bold;">${h}</td><td>${iz}</td><td style="color:red; font-weight:bold;">${a}</td>`;
                htmlBody += `<tr>${row}</tr>`;
            });
            tbody.innerHTML = htmlBody;
        }

        // === 6. DOWNLOAD EXCEL (SUDAH DIPERBAIKI) ===
        function downloadTable(tableId, filename) {
            const table = document.getElementById(tableId);
            if(table.rows.length < 3) { alert("Data masih kosong!"); return; }

            // TEKNIK BARU: Encode URI Component (Anti Gagal)
            let html = table.outerHTML;
            // Tambahkan border manual biar di Excel rapi
            html = html.replace(/<table/g, '<table border="1" style="font-family:Arial; border-collapse:collapse;"');
            
            const link = document.createElement("a");
            link.href = 'data:application/vnd.ms-excel;charset=utf-8,' + encodeURIComponent(html);
            link.download = `${filename}_${new Date().getTime()}.xls`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function bukaModalHarian(kelas) {
            document.getElementById('modal-detail').style.display = 'flex';
            document.getElementById('judul-modal').innerText = `Detail Harian - ${kelas}`;
            const tbody = document.getElementById('body-detail-harian');
            tbody.innerHTML = '<tr><td colspan="5">Memuat...</td></tr>';
            
            // Urutkan siswa
            let siswaList = kelompokKelas[kelas].sort((a,b) => a.nama.localeCompare(b.nama));
            let html = '';
            
            siswaList.forEach((s, i) => {
                const absen = dataGlobalHarian[s.username];
                let st = '<span style="color:red">Alpha</span>', jam = '-', ket = '-';
                if(absen) {
                    if(absen.status==='Hadir') { st='<span style="color:green; font-weight:bold">Hadir</span>'; jam=absen.jam_masuk; ket="Tepat Waktu"; }
                    else { st='<span style="color:#b45309">Izin</span>'; ket=absen.keterangan; }
                }
                html += `<tr><td>${i+1}</td><td style="text-align:left;">${s.nama}</td><td>${st}</td><td>${jam}</td><td>${ket}</td></tr>`;
            });
            tbody.innerHTML = html;
        }
        function tutupModal() { document.getElementById('modal-detail').style.display = 'none'; }
        function logout(){ if(confirm("Keluar?")) { localStorage.removeItem('userLoggedIn'); window.location.href='index.html'; } }

        // Start
        loadDataHarian();
    </script>
</body>
</html>